{% extends "/html/index.html" %}

{% block content %}
<style>
table{
    margin-top : 5%;
    margin-right: 25%;
    margin-left: -50%;
    }
</style>
<form id="objects" method="POST">
    <select id="objects_list" style="margin-top : 5%; margin-left : -45%" onchange="document.location=this.options[this.selectedIndex].value">
        <option id="select" value="select" disabled="" selected="">Please Select</option>
        {% for object in objects %}
            <option value="{{ object.name }}"> {{ object.name }} </option>
        {% endfor %}
    </select>
</form>

<form method="POST" action="{{url}}">
{% set _list = [] %}
<table class="table table-striped">
        <thead class="thead-dark">
        <tr>
            <th scope="col">Id</th>
            {% for date in dates %}
              <th scope="col"> {{ date }} </th>
            {% endfor %}
        </tr>
        {% for user in users %}
            <tr>
            <th> {{ ids.pop() }}</th>
            {% for time in timestamps %}
                <th> <input class="grade_input" name="grade_input" style="background-color : #d6d6d6" maxlength="3" size="1" type="text"
                            value="{{users.get(user, {}).get(objective, {}).get(time, '-')}}"
                            {{ _list.append(users.get(user, {}).get(objective, {}).get(time, '-')) }}
                   onchange="" ></th>
            {% endfor %}
            </tr>
        {% endfor %}
        </thead>
</table>
<script>
    var collection = document.getElementsByClassName('grade_input');
    var i;
    for (i = 0; i < collection.length; i++){
        document.write(collection[i].value);
    }
</script>
<h5>{{_list}}</h5>

<button class="btn btn-secondary btn-sm">Change</button>
</form>

{% endblock %}